# 值传递

`Java-summer` 项目 `base` 模块的 `clone` 包和 `reference` 包

## Java clone
#### 问题
##### 关于方法参数传递、浅克隆深克隆、String 在虚拟机中存储、jvm 内存结构的疑问
1. [引发思考的代码示例]( https://github.com/Darling012/java-summary/blob/master/base/src/main/java/com/learn/base/clone/ListAddString.java )
2. 需要对两个 list 进行取差集操作，要操作多次。
3. guava 提供了对 set 的相应操作。list 自带方法满足。
4. 在用 list1.addAll 等方法操作过程中发现需要 copy list，不然操作的都是同一个对象
5. 在 list. add () 中发现，假如是对象与早期理解一致，存入的是引用，后续更改具体值，那么 list 当中的对象也会改。
6. 然后发现一个与理解不一致情况，就是 `string a ="A"；list.add(a)`，这种在后边更改 a 指向具体值时，不起作用，idea 显示后边的 `a="b"` 未被使用。这也是引用对象啊
	1. [图解Java中的参数传递 - 掘金](https://juejin.cn/post/6869278349177569288)
		1. 提到 [String 对象的不可变性](Java方法.md#String%20对象的不可变性)
		2. [为什么string不可变](String.md)
7. 进而再次关注 [Java 到底是值传递还是引用传递？ - 知乎](https://www.zhihu.com/question/31203609) 问题, 其中 `没有提供改变自身方法的引用类型`。 
	1.   [个人对于5,6疑问的理解](5814327d535c2bc8c298c8e2c393a10.jpg)
8. 其中评论中 `其实就是操作的是一块内存还是新开辟了一块内存的区别,结果搞一堆术语来反而没人理解,局限于术语上去了。` 启发 [string = "a"](String.md#^im1rq1) 的多种情况
9. String 在虚拟机中怎么存的
10. jvm 内存结构以及其与 jmm 内存模型区别
	1. [求你了，再问你Java内存模型的时候别再给我讲堆栈方法区了](https://mp.weixin.qq.com/s?__biz=Mzg3MjA4MTExMw==&mid=2247485983&idx=1&sn=532f0e2a91e24592c985104d0657f5a4)


1. [Java中对于深拷贝和浅拷贝的理解 - 简书](https://www.jianshu.com/p/e8c6155d9694)
2. [如何理解深浅克隆](https://mp.weixin.qq.com/s?__biz=MzU2MTI4MjI0MQ==&mid=2247487368&idx=2&sn=670ce464e8db27490717c6c49f83abf7)
3. [深入浅出Java中的clone克隆方法](https://mp.weixin.qq.com/s?__biz=MzAxMjEwMzQ5MA==&mid=2448887926&idx=1&sn=e56bc5af29a58bcf4e5c4a7991946e25)


##### 方法调用
方法调用就是赋值的过程，就是将传入参数的值，复制给形参。

##### 方法声明时是 void+返回值当入参，还是正常返回值？
假如是返回值当入参，那么返回值应当是在外部创建，那么当执行方法时，就是外部 result 和形参 result 指向了同一个地址。
但是，当在方法内部，形参指向新的堆空间即新对象，那么将与外部 result 不再是同一个地址，也就达不到所期望的效果。
[Java陷阱——慎用入参做返回值 | 老卫（柳伟卫）的博客 - 关注编程、系统架构、性能优化 | waylau.com](https://waylau.com/trap-in-java-use-param-for-return/)

