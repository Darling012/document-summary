# 关于 pojo 中的 null 与默认值

1. 前端调用后端，后端之间相互调用时，入参与返回值 pojo 的空值如何处理？
2. pojo 中的基本类型都应该是包装类型，因为基本类型的默认值 0 会导致歧义，是值为 0 还是没有值补充的默认值。
3. 基于 2, pojo 中属性就是对象类型，包括对象、数组对象、包装类型、集合以及相关嵌套。
4. 基于 3，假如 pojo 属性没有值时返回 null，那么会导致两个问题
5. 一个是接收端基于属性对象操作时就会报 NPE
6. 一个是丢失二级属性，比如 pojo 中嵌套的 pojo 为 null, 假如有基于嵌套的 pojo 属性的统一操作就会报错
7. 基于 5，调用方保证 npe，即对结果进行判空
8. 基于 6，对象、数组、字符串返回{}、【】、“”, 其他返回 null。日期类型，也有可能会进行操作

##### 传整个 pojo 还是只传有值的字段？
整个 pojo。
1. 反序列化会将未传字段初始化 null, 还不如直接传
2. 第一次 abc, 第二次 def，不友好

##### null 的定位
1. pojo 的 null 到底代表什么？是没有传值?
2. 既然 null 会导致空指针，那是否属性都具有默认值？
3. 前端传入数据实体属性有为 null 字段，在全更新时会覆盖掉原有数据（解决：所有字段都传后端）
4. pojo 若有默认值，前端不传值，导致默认值更新到数据库（解决：更改过的没改过的字段都传后端）
5. 字符串格式化，`string.format()` 会将 null 格式化为字符串 'null'

## mysql 关于 null 
![MySQL数据类型](MySQL数据类型.md#mysql%20关于%20null)
## reference
[大家前后端规范是怎么制定的呢？ - V2EX](https://www.v2ex.com/t/445812)
1. 对数据签名的影响
	1. 要么序列化所有字段、要么序列化不为 null 的字段
2. 用 null，序列化时省略 null 字段
3. json 支持 null, 不要做无谓的转换
4. 数据库中有没有 null？出现 null 的场景是？
	1. 尽可能把所有列设为 not null。
	2. 索引 null 列需要额外的空间来保存（""长度为 0，不占空间。null 需要额外空间记录是否为 null）
	3. 如果数据库为 null
		1. 查询条件要加 null 判断
		2. 部分数据库索引失效
		3. 占用额外空间导致空间变大
		4. 程序要有判空操作

处理原则
1. 不报错
2. 简单处理

字段分类
1. 基本类型
2. 数组、对象

1. 返回所有字段。 `数组[]`、`对象{}`，其他可为空
2. 只返回不为 null 字段。
选择 1


[接口数据总是返回 null 如何回馈和处理 - 程序媛李李李李蕾 - 博客园](https://www.cnblogs.com/daysme/p/14656888.html)