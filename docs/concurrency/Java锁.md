# Javaé”
##### é—®é¢˜  
1. [Thread.sleep()ã€Object.wait()ã€Condition.await()ã€LockSupport.park()çš„åŒºåˆ«?](https://pdai.tech/md/java/thread/java-thread-x-lock-LockSupport.html#%E6%9B%B4%E6%B7%B1%E5%85%A5%E7%9A%84%E7%90%86%E8%A7%A3)  
2. [Javaå¹¶å‘é¢è¯•é¢˜åŠç­”æ¡ˆ](https://mp.weixin.qq.com/s?__biz=MzIzMzgxOTQ5NA==&mid=2247488001&idx=1&sn=e9d80b1128681de5bb603f0068a2d4db)  

[Javaä¸­çš„é”åŸç†ã€é”ä¼˜åŒ–ã€CASã€AQS](https://mp.weixin.qq.com/s/b5WpHoGsgPUOhEqJ8s2foQ)

## ç†è®ºåŸºç¡€  
#### å¹¶å‘  
åŒæ—¶æ‹¥æœ‰ä¸¤ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ï¼Œå¦‚æœç¨‹åºåœ¨å•æ ¸å¤„ç†å™¨ä¸Šè¿è¡Œï¼Œå¤šä¸ªçº¿ç¨‹äº¤æ›¿å¾—æ¢å…¥æˆ–è€…æ¢å‡ºå†…å­˜ï¼Œè¿™äº›çº¿ç¨‹æ˜¯åŒæ—¶â€œå­˜åœ¨â€çš„ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½å¤„äºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸ªçŠ¶æ€ï¼Œå¦‚æœè¿è¡Œåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šï¼Œæ­¤æ—¶ï¼Œç¨‹åºä¸­çš„æ¯ä¸ªçº¿ç¨‹éƒ½å°†åˆ†é…åˆ°ä¸€ä¸ªå¤„ç†å™¨æ ¸ä¸Šï¼Œå› æ­¤å¯ä»¥åŒæ—¶è¿è¡Œã€‚
  
#### é«˜å¹¶å‘  
é«˜å¹¶å‘ï¼ˆHigh Concurrencyï¼‰æ˜¯äº’è”ç½‘åˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„è®¾è®¡ä¸­å¿…é¡»è€ƒè™‘çš„å› ç´ ä¹‹ä¸€ï¼Œé€šå¸¸æ˜¯æŒ‡ï¼Œé€šè¿‡è®¾è®¡ä¿è¯ç³»ç»Ÿèƒ½å¤ŸåŒæ—¶å¹¶è¡Œå¤„ç†å¾ˆå¤šè¯·æ±‚ã€‚  
  
##### å¯¹æ¯”  

>è°ˆå¹¶å‘æ—¶ï¼šå¤šä¸ªçº¿ç¨‹æ“ä½œç›¸åŒçš„èµ„æºï¼Œä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œåˆç†åˆ©ç”¨èµ„æº  
>è°ˆé«˜å¹¶å‘æ—¶ï¼šæœåŠ¡èƒ½åŒæ—¶å¤„ç†å¾ˆå¤šè¯·æ±‚ï¼ˆå¦‚ 12306 çš„æŠ¢ç¥¨ï¼Œå¤©çŒ«åŒåä¸€çš„ç§’æ€æ´»åŠ¨ï¼Œè¿™ä¼šå¯¼è‡´ç³»ç»Ÿåœ¨çŸ­æ—¶é—´å†…æ‰§è¡Œå¤§é‡çš„æ“ä½œï¼Œå¦‚å¯¹èµ„æºçš„è¯·æ±‚ï¼Œæ•°æ®åº“çš„è®¿é—®ï¼‰ï¼Œæé«˜ç¨‹åºæ€§èƒ½ï¼ˆå¦‚æœé«˜å¹¶å‘å¤„ç†ä¸å¥½ï¼Œä¸å…‰ä¼šå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸å¥½ï¼Œè¿˜å¯èƒ½ä¼šä½¿æœåŠ¡å™¨å®•æœºï¼Œå‡ºç° OOM ç­‰ï¼‰  
  
1. [å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«](https://www.cnblogs.com/bughui/p/7422214.html)  
1. [çº¿ç¨‹ã€è¿›ç¨‹ã€å¤šçº¿ç¨‹ã€å¤šè¿›ç¨‹å’Œå¤šä»»åŠ¡æœ‰å•¥å…³ç³»?](https://mp.weixin.qq.com/s/H_-faCIW4OqoHXqBlnzWPw)  
1. [è¿›ç¨‹ã€çº¿ç¨‹ã€è¿›ç¨‹æ± ã€è¿›ç¨‹ä¸‰æ€ã€ğŸ¨åŒæ­¥ã€å¼‚æ­¥ã€ğŸ¦å¹¶å‘ã€å¹¶è¡Œã€ä¸²è¡Œ](https://www.cnblogs.com/songhaixing/p/13799827.html)  
  
#### å¹¶å‘ä¸‰è¦ç´   
1. å¯è§æ€§ï¼Œ[cpuç¼“å­˜](å†…å­˜.md#CPUç¼“å­˜)å¼•èµ·  
2. åŸå­æ€§ï¼Œåˆ†æ—¶å¤ç”¨å¼•èµ·  
3. æœ‰åºæ€§ï¼Œé‡æ’åºå¼•èµ·  
4. [å¹¶å‘ç¼–ç¨‹ï¼šåŸå­æ€§ã€å¯è§æ€§å’Œç«æ€æ¡ä»¶ä¸å¤åˆæ“ä½œ](https://mp.weixin.qq.com/s?__biz=MzAxOTQxOTc5NQ==&mid=2650499817&idx=1&sn=6ae767f81c3682580112a4b745236f46)  

é‡æ’åºï¼šç¼–è¯‘å™¨ä¼˜åŒ–ã€æŒ‡ä»¤é›†å¹¶è¡Œã€å†…å­˜ä¼˜åŒ–
## å…³é”®å­—  
### synchronized  
 ä½œç”¨ä¸»è¦æœ‰ä¸‰ä¸ªï¼š  
1. ç¡®ä¿çº¿ç¨‹äº’æ–¥çš„è®¿é—®åŒæ­¥ä»£ç   
2. ä¿è¯å…±äº«å˜é‡çš„ä¿®æ”¹èƒ½å¤ŸåŠæ—¶å¯è§  
3. æœ‰æ•ˆè§£å†³é‡æ’åºé—®é¢˜  
  
ä»è¯­æ³•ä¸Šè®²ï¼ŒSynchronized æ€»å…±æœ‰ä¸‰ç§ç”¨æ³•ï¼š  
1. ä¿®é¥°æ™®é€šæ–¹æ³•  
	1. æ‰§è¡Œæ–¹æ³•å‰è¦è·å–**åŒä¸€ä¸ªå¯¹è±¡**ä¸Šçš„é”ï¼Œé”æ˜¯å½“å‰å®ä¾‹å¯¹è±¡ã€‚è°ƒç”¨æ–¹æ³•å‰ä¼šæ£€æŸ¥å¸¸é‡æ± ä¸­ACC_SYNCHRONIZED æ˜¯å¦è¢«è®¾ç½®ã€‚  
2. ä¿®é¥°é™æ€æ–¹æ³•  
	1. æœ¬è´¨ä¸Šæ˜¯å¯¹ç±»çš„åŒæ­¥ï¼Œè°ƒç”¨çš„æ—¶å€™éœ€è¦è·å–**åŒä¸€ä¸ªç±»ä¸Š** Monitorï¼ˆæ¯ä¸ªç±»åªå¯¹åº”ä¸€ä¸ª Class å¯¹è±¡ï¼‰ï¼Œé”æ˜¯å½“å‰ç±»çš„classå¯¹è±¡  
3. ä¿®é¥°ä»£ç å—  
	1. é”æ˜¯**æ‹¬å·é‡Œé¢çš„å¯¹è±¡**ï¼Œåˆ©ç”¨monitorenter å’ŒmonitorexitæŒ‡ä»¤å®ç°  
##### jmm å…³äº synchornized çš„ä¸¤æ¡è§„å®š
1. çº¿ç¨‹è§£é”å‰ï¼Œå¿…é¡»æŠŠå…±äº«å˜é‡çš„æœ€æ–°å€¼åˆ·æ–°åˆ°ä¸»å†…å­˜
2. çº¿ç¨‹åŠ é”å‰ï¼Œå°†æ¸…ç©ºå·¥ä½œå†…å­˜ä¸­å…±äº«å˜é‡ï¼Œåœ¨ä½¿ç”¨æ—¶é‡æ–°ä»ä¸»å†…å­˜è¯»å–æœ€æ–°å€¼

#### Javaå¯¹è±¡ç»„æˆ
1. å¯¹è±¡å¤´
	1. mark word
		1. Mark Wordç”¨äºå­˜å‚¨**å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®**ï¼Œå¦‚å“ˆå¸Œç ï¼ˆHashCodeï¼‰ã€GCåˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰çš„é”ã€åå‘çº¿ç¨‹ IDã€åå‘æ—¶é—´æˆ³ç­‰ç­‰ã€‚
	2. æŒ‡å‘ç±»çš„æŒ‡é’ˆ
	3. æ•°ç»„é•¿åº¦
2. å®ä¾‹æ•°æ®
3. å¯¹é½å¡«å……å­—èŠ‚
[å¾¡å§å¸¦ä½ æ·±å…¥ç†è§£synchronizedçš„å®ç°åŸç†](https://mp.weixin.qq.com/s?__biz=MzU4Njc1MTU2Mw==&mid=2247483769&idx=1&sn=d28a030b8499fc5959d101d7d24af12f)  

[Java å¯¹è±¡å¤´ä¿¡æ¯åˆ†æå’Œä¸‰ç§é”çš„æ€§èƒ½å¯¹æ¯”](https://mp.weixin.qq.com/s/gaqEjwa13T-IVeGrykqCqA)  
#### Synchronizedåº•å±‚ä¼˜åŒ–ï¼ˆåå‘é”ã€è½»é‡çº§é”ï¼‰
[Javaå¹¶å‘ç¼–ç¨‹ï¼šSynchronizedåº•å±‚ä¼˜åŒ–ï¼ˆåå‘é”ã€è½»é‡çº§é”ï¼‰ - liuxiaopeng - åšå®¢å›­](https://www.cnblogs.com/paddix/p/5405678.html)
é”çš„çŠ¶æ€æ€»å…±æœ‰å››ç§ï¼šæ— é”çŠ¶æ€ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ã€‚éšç€é”çš„ç«äº‰ï¼Œé”å¯ä»¥ä»åå‘é”å‡çº§åˆ°è½»é‡çº§é”ï¼Œå†å‡çº§çš„é‡é‡çº§é”ï¼ˆä½†æ˜¯é”çš„å‡çº§æ˜¯å•å‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åªèƒ½ä»ä½åˆ°é«˜å‡çº§ï¼Œä¸ä¼šå‡ºç°é”çš„é™çº§ï¼‰ã€‚JDK 1.6ä¸­é»˜è®¤æ˜¯å¼€å¯åå‘é”å’Œè½»é‡çº§é”çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡-XX:-UseBiasedLockingæ¥ç¦ç”¨åå‘é”ã€‚
##### reference  
1. [Javaå¹¶å‘ç¼–ç¨‹ï¼šSynchronizedåŠå…¶å®ç°åŸç†](https://www.cnblogs.com/paddix/p/5367116.html)  
3. [æµ…è°ˆå¤šçº¿ç¨‹ä¹‹é”çš„æœºåˆ¶](https://blog.csdn.net/z1035075390/article/details/54929909)  

### volidate
å…·å¤‡å¯è§æ€§ï¼Œä¸å…·å¤‡åŸå­æ€§
1. ä¿è¯ä¸€ä¸ªçº¿ç¨‹ A å¯¹ä¸€ä¸ªå˜é‡çš„ä¿®æ”¹æ˜¯å¯¹çº¿ç¨‹ B å¯è§ï¼Œä¸”è¿™ä¸ªå˜é‡çš„ä¿®æ”¹ä¸èƒ½ä¾èµ–å€¼æœ¬èº«ï¼Œå¦‚ i++
2. ä¿è¯ä»£ç ä¸è¢« jvm é‡æ’åº
3. åŠ å…¥å†…å­˜å±éšœ
	1. ä¸€ç»„å¤„ç†å™¨å‘½ä»¤ï¼ˆlockï¼‰ï¼Œç”¨äºå®ç°å¯¹å†…å­˜æ“ä½œçš„é¡ºåºé™åˆ¶
		1. å°†å½“å‰å¤„ç†å™¨ç¼“å­˜è¡Œçš„æ•°æ®å†™å›åˆ°ç³»ç»Ÿå†…å­˜
		2. è¿™ä¸ªå†™å›å†…å­˜çš„æ“ä½œä¼šå¼•èµ·å…¶ä»– cpu é‡Œç¼“å­˜è¯¥å†…å­˜åœ°å€çš„æ•°æ®æ— æ•ˆ

## JUCåŸå­ç±»  
### CAS  
CPUåŸå­æŒ‡ä»¤ï¼ŒåŸºäºç¡¬ä»¶å¹³å°æ±‡ç¼–æŒ‡ä»¤ï¼ŒJVMå°è£…è°ƒç”¨ã€‚  
  
##### é—®é¢˜  
1. ABAé—®é¢˜ï¼šåŠ ç‰ˆæœ¬å·è§£å†³ï¼ŒAtomicStampedReferenceè§£å†³  
2. å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§  
  
### Unsafe  
å†…éƒ¨ä½¿ç”¨è‡ªæ—‹çš„æ–¹å¼è¿›è¡ŒCASï¼ˆè°ƒç”¨nativeæ–¹æ³•ï¼‰æ›´æ–°(whileå¾ªç¯è¿›è¡ŒCASæ›´æ–°ï¼Œå¦‚æœæ›´æ–°å¤±è´¥ï¼Œåˆ™å¾ªç¯å†æ¬¡é‡è¯•)ã€‚åªèƒ½jvmå†…éƒ¨ä½¿ç”¨unsafeç±»ã€‚  
  
### åŸå­ç±»  
AtomicInteger ç­‰13ä¸ªåŸå­ç±»ï¼ˆåŸºæœ¬ç±»å‹ã€æ•°ç»„ã€å¼•ç”¨ç±»å‹ã€å­—æ®µï¼‰  
1. volatileä¿è¯çº¿ç¨‹çš„å¯è§æ€§  
2. CAS ä¿è¯æ•°æ®æ›´æ–°çš„åŸå­æ€§  
  
##### reference  
1. [æ€§èƒ½ä¼˜åŒ–ä¹‹ä½¿ç”¨LongAdderæ›¿æ¢AtomicLong](https://juejin.cn/post/6921595303460241415)  
 
## JUCé”  
### LockSupport  
åˆ›å»ºé”å’Œå…¶ä»–åŒæ­¥ç±»çš„åŸºæœ¬çº¿ç¨‹é˜»å¡åŸè¯­ã€‚LockSupportçš„æ ¸å¿ƒå‡½æ•°éƒ½æ˜¯åŸºäºUnsafeç±»ä¸­å®šä¹‰çš„parkå’Œunparkå‡½æ•°ã€‚  
1. [AQSé˜»å¡å”¤é†’å·¥å…·LockSupport](http://geyifan.cn/2017/03/19/locksupport-utilities/)  
  
### AQS  
AQS æ ¸å¿ƒæ€æƒ³æ˜¯
1. å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºç©ºé—²ï¼Œåˆ™å°†å½“å‰è¯·æ±‚èµ„æºçš„çº¿ç¨‹è®¾ç½®ä¸ºæœ‰æ•ˆçš„å·¥ä½œçº¿ç¨‹ï¼Œå¹¶ä¸”å°†å…±äº«èµ„æºè®¾ç½®ä¸ºé”å®šçŠ¶æ€ã€‚
2. å¦‚æœè¢«è¯·æ±‚çš„å…±äº«èµ„æºè¢«å ç”¨ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—çº¿ç¨‹é˜»å¡ç­‰å¾…ä»¥åŠè¢«å”¤é†’æ—¶é”åˆ†é…çš„æœºåˆ¶
	1. è¿™ä¸ªæœºåˆ¶ AQS æ˜¯ç”¨ CLH é˜Ÿåˆ—é”å®ç°çš„ï¼Œå³å°†æš‚æ—¶è·å–ä¸åˆ°é”çš„çº¿ç¨‹åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚
	2. CLH (Craig, Landin, and Hagersten) é˜Ÿåˆ—æ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ— (è™šæ‹Ÿçš„åŒå‘é˜Ÿåˆ—å³ä¸å­˜åœ¨é˜Ÿåˆ—å®ä¾‹ï¼Œä»…å­˜åœ¨ç»“ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»)ã€‚AQS æ˜¯å°†æ¯æ¡è¯·æ±‚å…±äº«èµ„æºçš„çº¿ç¨‹å°è£…æˆä¸€ä¸ª CLH é”é˜Ÿåˆ—çš„ä¸€ä¸ªç»“ç‚¹ (Node) æ¥å®ç°é”çš„åˆ†é…ã€‚

### é”åˆ†ç±»  
1. çº¿ç¨‹è¦ä¸è¦é”ä½åŒæ­¥èµ„æº  
   1. é”ä½ï¼šæ‚²è§‚é”  
   2. ä¸é”ä½ï¼šä¹è§‚é”  
2. æŒ‰ä¸æŒ‰è¯·æ±‚é”æ—¶é—´æ—©æ™šæ’é˜Ÿ  
   1. æ’é˜Ÿï¼šå…¬å¹³é”  
   2. å…ˆå°è¯•æ’é˜Ÿå†æ’é˜Ÿï¼š éå…¬å¹³é”ï¼Œé¿å…å”¤é†’å¸¦æ¥çš„ç©ºæ¡£æœŸã€‚çŒœæµ‹æ˜¯è·å¾—cpuæ—¶é—´ç‰‡çš„çº¿ç¨‹æ¥å°è¯•å–é”ã€‚  
3. å¤šä¸ªçº¿ç¨‹èƒ½ä¸èƒ½å…±äº«ä¸€æŠŠé”  
   1. èƒ½ï¼š å…±äº«é”ï¼Œæ˜¯ä¸€ç§ä¹è§‚é”ï¼ŒReadWriteLock  
   2. ä¸èƒ½ï¼šç‹¬å é”ã€æ’ä»–é”ã€äº’æ–¥é”ï¼Œæ˜¯ä¸€ç§æ‚²è§‚é”ï¼ŒReentrantLock  
4. å†æ¬¡è·å–è‡ªå·±å·²ç»è·å¾—çš„é”æ˜¯å¦é˜»å¡  
   1. ä¸é˜»å¡ï¼š å¯é‡å…¥é”ã€é€’å½’é”ï¼ŒReentrantLockå’Œsynchronizedéƒ½æ˜¯å¯é‡å…¥é”  
   2. é˜»å¡ï¼š ä¸å¯é‡å…¥  
5. è·å–é”å¤±è´¥åï¼Œè¦ä¸è¦é˜»å¡æŒ‚èµ·  
   1. ä¸é˜»å¡ï¼šè‡ªæ—‹é”ã€é€‚åº”æ€§è‡ªæ—‹é”  
   2. é˜»å¡ï¼šéè‡ªæ—‹é”  
6. ç­‰é”æ˜¯å¦å¯ä¸­æ–­  
   1. å¯ä»¥ï¼šå¯ä¸­æ–­é” lock  
   2. ä¸å¯ä»¥ï¼šä¸å¯ä¸­æ–­é” synchronized  
7. é’ˆå¯¹synchronizedçš„çŠ¶æ€  
   1. [æ— é”-ã€‹åå‘é”-ã€‹è½»é‡çº§é”-ã€‹é‡é”](https://mp.weixin.qq.com/s?__biz=MzI5NTYwNDQxNA==&mid=2247485139&idx=1&sn=3e2a0f56907b8bf90597ad6846cfa846)

  
##### æ‚²è§‚é”ä¸ä¹è§‚é”  
1. ä¹è§‚é”ä¸æ‚²è§‚é”æ˜¯ä¸€ç§å¹¿ä¹‰ä¸Šçš„æ¦‚å¿µï¼Œä½“ç°äº†çœ‹å¾…çº¿ç¨‹åŒæ­¥çš„ä¸åŒè§’åº¦ã€‚åœ¨Javaå’Œæ•°æ®åº“ä¸­éƒ½æœ‰æ­¤æ¦‚å¿µå¯¹åº”çš„å®é™…åº”ç”¨ã€‚  
2. Javaä¸­æ‚²è§‚é”å®ç°ï¼šsynchronizedå…³é”®å­—å’ŒLockçš„å®ç°ç±»éƒ½æ˜¯æ‚²è§‚é”ã€‚  
3. Javaä¸­ä¹è§‚é”å®ç°ï¼šåœ¨Javaä¸­æ˜¯é€šè¿‡ä½¿ç”¨æ— é”ç¼–ç¨‹æ¥å®ç°ï¼ŒJavaåŸå­ç±»ä¸­çš„é€’å¢æ“ä½œå°±é€šè¿‡CASè‡ªæ—‹å®ç°çš„ã€‚  
4. **æ‚²è§‚é”é€‚åˆå†™æ“ä½œå¤šçš„åœºæ™¯**ï¼Œå…ˆåŠ é”å¯ä»¥ä¿è¯å†™æ“ä½œæ—¶æ•°æ®æ­£ç¡®ã€‚  
5. **ä¹è§‚é”é€‚åˆè¯»æ“ä½œå¤šçš„åœºæ™¯**ï¼Œä¸åŠ é”çš„ç‰¹ç‚¹èƒ½å¤Ÿä½¿å…¶è¯»æ“ä½œçš„æ€§èƒ½å¤§å¹…æå‡ã€‚ 
6. git ä¹è§‚é”å½¢å¼  

##### reference  
1. [æ¼«è¯ï¼šå¦‚ä½•ç»™å¥³æœ‹å‹è§£é‡Šä»€ä¹ˆæ˜¯å…±äº«é”å’Œæ’ä»–é”](https://mp.weixin.qq.com/s/DRcwDgUMGwYC8Hr-mMnM_A)  
2. [æ¼«è¯ï¼šå¦‚ä½•ç»™å¥³æœ‹å‹ä»‹ç»ä»€ä¹ˆæ˜¯æ­»é”](https://mp.weixin.qq.com/s/26-D_gFF2RCieJJ5qAqipA)  
3. [Java ä¸­å„ç§é”çš„ä»‹ç»](https://mp.weixin.qq.com/s?__biz=MzAwMDczMjMwOQ==&mid=2247483971&idx=2&sn=efeee4f2aff2661fbeb0c0772f8cefd9)  
4. [ Javaå¹¶å‘ - Javaä¸­æ‰€æœ‰çš„é”](https://pdai.tech/md/java/thread/java-thread-x-lock-all.html)  
5. [åˆ°åº•ä»€ä¹ˆæ˜¯é‡å…¥é”ï¼Œæ‹œæ‰˜ï¼Œä¸€æ¬¡ææ¸…æ¥šï¼](https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247489881&idx=1&sn=fd30734494272ec71ea9d77e2a2d2b00)  
8. [å…±äº«é”ã€æ’ä»–é”ã€äº’æ–¥é”ã€æ‚²è§‚é”ã€ä¹è§‚é”ã€è¡Œé”ã€è¡¨é”ã€é¡µé¢é”ã€ä¸å¯é‡å¤è¯»ã€ä¸¢å¤±ä¿®æ”¹ã€è¯»è„æ•°æ®](https://blog.csdn.net/weixin_36634753/article/details/90815755)  
  
### Lock  
#### ReentrantLock  
é»˜è®¤éå…¬å¹³é”  
1. tryå‰è·å–é”ï¼Œfinallyé‡Œé‡Šæ”¾é”ï¼  
2. Lockä¸ä¼šåƒsynchronizedä¸€æ ·ï¼Œå¼‚å¸¸çš„æ—¶å€™è‡ªåŠ¨é‡Šæ”¾é”ï¼Œæ‰€ä»¥æœ€ä½³å®è·µæ˜¯ï¼Œfinallyä¸­é‡Šæ”¾é”ï¼Œä»¥ä¾¿ä¿è¯å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™é”ä¸€å®šè¢«é‡Šæ”¾  
3. ç”¨tryLockæ¥é¿å…æ­»é”ï¼Œlock()æ–¹æ³•ä¸èƒ½è¢«ä¸­æ–­ï¼Œä¸€æ—¦é™·å…¥æ­»é”ï¼Œlock()å°±ä¼šæ°¸ä¹…ç­‰å¾….trylock()ç”¨æ¥å°è¯•è·å¾—é”ï¼Œå¦‚æœå½“æœŸé”æ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹å ç”¨ï¼Œåˆ™è¿”å›trueï¼Œå¦åˆ™FALSEï¼Œå¯ä»¥ç”¨è¿™ä¸ªç»“æœæ¥å†³å®šç¨‹åºåç»­è¡Œä¸ºã€‚trylock(time)è¶…æ—¶å°±æ”¾å¼ƒ  
4. lock.lockInterruptibly()ï¼Œç›¸å½“äºtryLock(time)æŠŠè¶…æ—¶æ—¶é—´è®¾ç½®ä¸ºæ— é™ï¼Œåœ¨ç­‰é”è¿‡ç¨‹ä¸­å¯ä»¥è¢«ä¸­æ–­  
5. [Javaå¤šçº¿ç¨‹ä¹‹ReentrantLockä¸Condition](https://www.cnblogs.com/xiaoxi/p/7651360.html)  
  
#### ReentrantReadWriteLock  
1. å’ŒReentrantLockæ²¡å…³ç³»
2. ä¸ç®¡æ˜¯ReadLockè¿˜æ˜¯WriteLockéƒ½æ”¯æŒInterruptï¼Œè¯­ä¹‰ä¸ReentrantLockä¸€è‡´ã€‚  
3. WriteLockæ”¯æŒConditionå¹¶ä¸”ä¸ReentrantLockè¯­ä¹‰ä¸€è‡´ï¼Œè€ŒReadLockåˆ™ä¸èƒ½ä½¿ç”¨Conditionï¼Œå¦åˆ™æŠ›å‡ºUnsupportedOperationExceptionå¼‚å¸¸ã€‚   
4.   
> åœºæ™¯ï¼šçº¿ç¨‹2ã€4åœ¨è¯»ï¼Œ3æƒ³å†™ï¼Œæ‹¿ä¸åˆ°é”è¿›å…¥ç­‰å¾…é˜Ÿåˆ—ï¼Œ5ä¸åœ¨é˜Ÿåˆ—ï¼Œç°åœ¨è¦è¯»  
> è¦ä¹ˆï¼š5æ’é˜Ÿ å’Œ2ã€4ä¸€èµ·è¯»ï¼Œæ•ˆç‡é«˜ä½†å®¹æ˜“é€ æˆé¥¥é¥¿  
> è¦ä¹ˆï¼š5æ’åˆ°3åè¾¹ï¼Œ é¿å…é¥¥é¥¿   ReentrantReadWriteLockçš„é€‰æ‹©  
  

å…¬å¹³é”ï¼šAQSæœ‰äº†ç­‰å¾…èŠ‚ç‚¹åè¯»ã€å†™éƒ½è¦æ’é˜Ÿ   
éå…¬å¹³é”ï¼š  
1. å†™é”å¯ä»¥éšæ—¶æ’é˜Ÿï¼Œä½†è·å–ä¸åˆ°é”ï¼Œä¼šè¿›å…¥é˜Ÿåˆ—æ’é˜Ÿ  
2. è¯»é”åªåœ¨ç­‰å¾…é˜Ÿåˆ—å¤´èŠ‚ç‚¹ä¸æ˜¯å†™é”æ—¶å¯æ’é˜Ÿ  
  
1. [è½»æ¾æŒæ¡javaè¯»å†™é”(ReentrantReadWriteLock)çš„å®ç°åŸç†](https://blog.csdn.net/yanyan19880509/article/details/52435135)  
2. [Javaå¹¶å‘ï¼ˆ7ï¼‰- ä½ çœŸçš„äº†è§£ReentrantReadWriteLockå—ï¼Ÿ](https://www.cnblogs.com/konck/p/9473615.html)  
  
###### é”é™çº§  
æŒæœ‰å†™é”å¯ä»¥é™çº§ä¸ºè¯»é” 

### Synchronizedä¸Lock  
Synchronizedç¼ºç‚¹ï¼š  
1. è¯•å›¾è·å–é”ä¸èƒ½è®¾å®šè¶…æ—¶ã€ä¸èƒ½ä¸­æ–­ä¸€ä¸ªæ­£åœ¨è¯•å›¾è·å¾—é”çš„çº¿ç¨‹ï¼Œåªæœ‰æ‰§è¡Œå®Œæ¯•æˆ–è€…å¼‚å¸¸ç»“æŸæ‰èƒ½é‡Šæ”¾é”, æ— æ³•ä¸»åŠ¨é‡Šæ”¾ï¼Œæ­»é”ã€‚  
2. æ¯ä¸ªé”ä»…æœ‰ä¸€ä¸ªå•ä¸€çš„æ¡ä»¶(æŸä¸ªå¯¹è±¡)ï¼Œç›¸å¯¹è€Œè¨€ï¼Œè¯»å†™é”æ›´åŠ çµæ´»  
3. æ— æ³•çŸ¥é“æ˜¯å¦æˆåŠŸè·å¾—é”  
  
##### reference  
1. [Javaæä¾›äº†synchronizedï¼Œä¸ºä»€ä¹ˆè¿˜è¦æä¾›Lockå‘¢ï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzAwNjkxNzgxNg==&mid=2247488848&idx=2&sn=9fffb71d0936b7ea538b062e295ae583)  
2. [Synchronizedä¸Lock](https://pdai.tech/md/java/thread/java-thread-x-key-synchronized.html#synchronized%E4%B8%8Elock)  
  
## JUCé›†åˆ  
1. [Javaå¤šçº¿ç¨‹æ€»ç»“ä¹‹èŠä¸€èŠQueue](https://www.iteye.com/blog/hellosure-1126541)  
2. [14ä¸ªJavaå¹¶å‘å®¹å™¨](https://blog.csdn.net/Design407/article/details/100084673)  
3.  
  
## çº¿ç¨‹  
1. æ“ä½œç³»ç»Ÿæ”¯æŒä»€ä¹ˆæ ·çš„çº¿ç¨‹æ¨¡å‹å–å†³äºè™šæ‹Ÿæœºæ˜ å°„ï¼Œå¯¹Javaç¨‹åºé€æ˜  
2. ```java.lang.Thread#setPriority(int newPriority)```å¹¶ä¸ä¸€å®šèƒ½ä¸ç³»ç»Ÿä¸­çš„ä¼˜å…ˆçº§åŒ¹é…ï¼Œæ‰€ä»¥å¯ä»¥ç†è§£ä¸º```å»ºè®®ä¼˜å…ˆçº§```  
  
#### çŠ¶æ€  
##### new  
åˆšåˆ›å»ºçš„çº¿ç¨‹ï¼Œå°šæœªè°ƒç”¨start()æ—¶  
##### runnable  
åœ¨è°ƒç”¨ start () åè¿›å…¥ï¼Œ [å¯ä»¥è®¤ä¸ºæœ‰ä¿©å­çŠ¶æ€](https://mp.weixin.qq.com/s?__biz=MzUzMTA2NTU2Ng==&mid=2247487565&idx=1&sn=067bf9ddb8f9db90c2bb34f09d443491)   
1. readyï¼š åœ¨è¢«çº¿ç¨‹è°ƒåº¦å™¨è°ƒåº¦åè¿›å…¥running  
2. running: å³ run () é‡Œçš„ä»£ç æ­£åœ¨è¢« cpu æ‰§è¡Œï¼Œå½“ `Thread#yield ()` åè¿›å…¥ ready  
##### waiting  
æ— é™æœŸç­‰å¾…ï¼Œä¸ä¼šè¢«åˆ†é…cpuæ‰§è¡Œæ—¶é—´ï¼Œè¢«æ˜¾å¼å”¤é†’åè¿›å…¥runnableã€‚ä»¥ä¸‹æ–¹æ³•è®©çº¿ç¨‹è¿›å…¥watingçŠ¶æ€  
1. ä¸å¸¦è¶…æ—¶çš„ `Object#wait()`ï¼Œç­‰å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨å¯¹è±¡ä¸Š `Object#notify()` æˆ–è€… `Object#notifyAll ()`
2. ä¸å¸¦è¶…æ—¶çš„ `LockSupport.park()`ï¼Œç­‰å¦ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ ` LockSupport.unpart(thread)`
3. ä¸å¸¦è¶…æ—¶çš„ `Thread#join()` ï¼Œé˜»å¡å½“æœŸçº¿ç¨‹ç›´åˆ° join çš„çº¿ç¨‹ç»ˆç»“  
##### time waiting  
æœ‰é™æœŸç­‰å¾…ï¼Œä¸ä¼šè¢«åˆ†é…cpuæ‰§è¡Œæ—¶é—´ï¼Œä½†ä¸éœ€è¦æ˜¾ç¤ºå”¤é†’ï¼Œè¶…æ—¶åä¼šè¢«vmå”¤é†’ã€‚  
##### blocked  
é˜»å¡ç­‰å¾…è·å–ç›‘è§†å™¨ï¼Œä¸ä¼šè¢«åˆ†é…cpuæ‰§è¡Œæ—¶é—´ï¼Œæœ‰ä¸¤ç§æƒ…å†µè¿›å…¥é˜»å¡  
1. ç­‰é”  
2. è¿›å…¥åŒæ­¥ä»£ç åï¼Œ  
##### terminated  
ç»ˆç»“ï¼Œä¸€ä¸ªçº¿ç¨‹å®ä¾‹åªèƒ½è°ƒç”¨ä¸€æ¬¡run()æ–¹æ³•ï¼Œrunæ–¹æ³•æ‰§è¡Œåï¼Œçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚  
  
#### ä¸Šä¸‹æ–‡åˆ‡æ¢  
å³çº¿ç¨‹åœ¨runnableå’Œérunnableä¹‹é—´åˆ‡æ¢æ—¶ï¼Œè¦ä¿å­˜ä¸æ¢å¤cpuå¯„å­˜å™¨ç¨‹åºè®¡æ•°å™¨ç­‰ä¿¡æ¯ã€‚  
é¢å¤–çš„å¼€é”€  
1. ä¿å­˜ä¸æ¢å¤ä¸Šä¸‹æ–‡  
2. å¯¹çº¿ç¨‹è¿›è¡Œè°ƒåº¦çš„cpuæ—¶é—´å¼€é”€  
3. cpuç¼“å­˜å¤±æ•ˆ  
  
##### reference  
1. [Javaçº¿ç¨‹ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€åˆ‡æ¢](https://mp.weixin.qq.com/s?__biz=MzAwMDczMjMwOQ==&mid=2247484099&idx=1&sn=5d8cf7ff7b0f9274cc5fd79a3edf1e42)  
2. [Javaçº¿ç¨‹çŠ¶æ€ä¹‹ç»†èŠ‚å›é¡¾](https://mp.weixin.qq.com/s?__biz=MzAxNjk4ODE4OQ==&mid=2247486023&idx=2&sn=e832c2da5ea748c0940803b46805ea0b)  
3. [çº¿ç¨‹é—´åˆ°åº•å…±äº«äº†å“ªäº›è¿›ç¨‹èµ„æºï¼Ÿ](https://mp.weixin.qq.com/s/L7-CypKf25bLVzIeStB-sA)  
  
#### ä»€ä¹ˆæƒ…å†µä¸‹çº¿ç¨‹ä¼šè®©å‡ºCPU ä¸ é”  
åªæœ‰runnableåˆ°runningæ—¶æ‰ä¼šå ç”¨cpuæ—¶é—´ç‰‡ï¼Œå…¶ä»–éƒ½ä¼šå‡ºè®©cpuæ—¶é—´ç‰‡ã€‚  
1. Thread.sleep()ï¼›è®©å‡ºcpuï¼Œåœ¨è¶…æ—¶åcpuç»§ç»­æ‰§è¡Œã€‚å‡è‹¥æ˜¯åœ¨åŒæ­¥ä»£ç å—ä¸­ï¼Œä¸ä¼šé‡Šæ”¾é”ã€‚  
2. Thread.yield(); å»ºè®®æ€§è®©å‡ºåä¼šå†æ¬¡å‚ä¸ç«äº‰  
3. Object.wait()ã€condition.await()è®©å‡ºcpu é‡Šæ”¾é”  
4. LockSupport.park() è®©å‡ºcpu,é‡Šæ”¾é”èµ„æºå®é™…ä¸Šæ˜¯åœ¨Conditionçš„await()æ–¹æ³•ä¸­å®ç°  
   1. Condition.await()åº•å±‚  
      1. æŠŠå½“å‰çº¿ç¨‹æ·»åŠ åˆ°æ¡ä»¶é˜Ÿåˆ—ä¸­  
      2. â€œå®Œå…¨â€é‡Šæ”¾é”ï¼Œä¹Ÿå°±æ˜¯è®©stateçŠ¶æ€å˜é‡å˜ä¸º0  
      3. è°ƒç”¨LockSupport.park()é˜»å¡å½“å‰çº¿ç¨‹   
5. notify()å’Œnotifyall()ä¸ä¼šçœŸæ­£é‡Šæ”¾é”ï¼Œè¦ç­‰åˆ°åŒæ­¥ä»£ç å—æ‰§è¡Œå®Œåæ‰é‡Šæ”¾é”  
  
åŒºåˆ«ï¼š  
1. wait()å’Œnotify()ã€notifyAll() æ˜¯java.lang.Objectçš„æ–¹æ³•ï¼Œç”¨äºé”æœºåˆ¶ã€‚waitç­‰å¾…å…¶å®æ˜¯å¯¹è±¡monitorï¼Œæ‰€æœ‰ç±»éƒ½ç»§æ‰¿Objectï¼Œæ¯ä¸ªå¯¹è±¡éƒ½å†…ç½®monitorå¯¹è±¡ã€‚  
2. Thread.sleep(long) å’ŒThread.yield()éƒ½æ˜¯Threadç±»çš„é™æ€æ–¹æ³•ï¼Œè·Ÿé”æ²¡å…³ç³»ã€‚  
3. join,æœ¬è´¨æ˜¯è®©è°ƒç”¨çº¿ç¨‹wait()åœ¨å½“å‰çº¿ç¨‹å¯¹è±¡å®ä¾‹ä¸Šï¼Ÿè®©çº¿ç¨‹å¹¶è¡Œå˜ä¸²è¡Œã€‚  
4. park/unparkä¸wati/notifyéƒ½æä¾›é˜»å¡å”¤é†’çš„åŠŸèƒ½ï¼Œç”¨åšçº¿ç¨‹é—´åŒæ­¥ï¼Œä¸è¿‡ä¸¤è€… çš„ç²’åº¦ä¸åŒï¼Œpark/unparkä½œç”¨åœ¨çº¿ç¨‹ä¸Šï¼Œè€Œwait/notifyä½œç”¨åœ¨å¯¹è±¡ä¸Šï¼ŒäºŒè€…æ²¡æœ‰äº¤é›†ã€‚Objectçš„wait/notifyä½¿ç”¨å‰å¿…é¡»è·å–å¯¹è±¡çš„ç›‘è§†å™¨ï¼Œè€Œpark/unparkä¸éœ€è¦ã€‚  
  
##### reference  
1. [ä»€ä¹ˆæƒ…å†µä¸‹çº¿ç¨‹ä¼šè®©å‡ºCPU](https://blog.csdn.net/xiaozhu0301/article/details/96881830)  
2. [sleepã€yieldã€waitã€joinçš„åŒºåˆ«](https://www.cnblogs.com/noteless/p/10443446.html)  
3. [ sleepã€yieldã€join çš„ç”¨æ³•åŠ sleepä¸waitåŒºåˆ«](https://mp.weixin.qq.com/s?__biz=MzAxNjk4ODE4OQ==&mid=2247488457&idx=2&sn=622393a5858864a4f6af99f89d0080d2)  
4. [çº¿ç¨‹é—´çš„åä½œ(wait/notify/sleep/yield/join)](https://www.cnblogs.com/paddix/p/5381958.html)  
5. [Wait/Notifyé€šçŸ¥æœºåˆ¶è§£æ](https://juejin.cn/post/6844903520437551111)  
  
##### reference  
1. [Javaæ€»ç»“ç¯‡ç³»åˆ—ï¼šJavaå¤šçº¿ç¨‹ï¼ˆä¸€ï¼‰](https://www.cnblogs.com/lwbqqyumidi/p/3804883.html)  
1. [å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨](https://blog.csdn.net/qq_26545305/article/details/79516610)  
1. [çº¿ç¨‹ä¼‘çœ åªä¼šç”¨ Thread.sleepï¼Ÿ](https://mp.weixin.qq.com/s?__biz=MzI3ODcxMzQzMw==&mid=2247490616&idx=2&sn=531b29636b90cd73642b987e1e31fbad)  
  
## æ§åˆ¶å¹¶å‘æµç¨‹  
1. [Semaphoreè‡ªç™½ï¼šé™æµå™¨ç”¨æˆ‘å°±å¯¹äº†ï¼](https://mp.weixin.qq.com/s?__biz=MzA5NDg3MjAwMQ==&mid=2457112913&idx=1&sn=bf88925730209956bc155273db9d29ef)  
2.  
  
## å¤šçº¿ç¨‹çš„é€šä¿¡  
1. [å¤šçº¿ç¨‹çš„é€šä¿¡](https://mp.weixin.qq.com/s?__biz=MzU2MTI4MjI0MQ==&mid=2247487399&idx=3&sn=ff752d76ed35346a82fa29a448ba5b1b)