# 算法试用


##### 算法演示平台文件路径分析
###### 前置条件
1. 本地文件上传
2. 为了迁移服务器（平台）不影响文件访问，所以数据库中文件路径为相对路径
3. 基于 1，前端修改时，入库路径应为相对路径，但前端要实现展示文件，就要有全路径
###### 解决办法
1. 数据库远端解决，即前端，算法侧处理拼接
	1. 好处是前端修改操作，前端和后端都不需要额外处理 url
	2. 坏处是前端需要所有展示文件的地方做出处理
	3. 算法需要在取文件 url 和返回文件 url 时做出处理
2. 数据库侧即后端处理，返回给前端、算法时拼接成全路径
	1. 好处是前端、算法不再需要额外处理，
	2. 坏处是后端返给前端、算法要做处理，前端修改时后端又要处理
3. 前端与后端的处理区别主要在，后端能抽取公共方法，虽然业务各处需要调用，但更改时只需改一处。~~而前端的文件展示组件需要每个都写死~~。
###### 结论
之前认为只有后端能提取公共 url，理解错误。无论前端、后端、算法都可以定义前缀，且前端，算法需要配置后端服务 `ip`，所以
1. 后端处理
	1. 各个文件处，进来处理，出去也要处理
2. 后端不处理
	1. 算法取、返拼接 `ip+前缀+文件名`，只有这两个地方处理
	2. 前端在展示数据时 `ip+前缀+文件名`，各个文件处
所以，从工作量上来说，采用后端是 `文件数 * 2`，不采用是 `文件数 + 2`
###### 疑问
为什么前端媒体组件里声明的是 `前缀+文件名`，但是请求的是 `ip+前缀+文件名` ？
[src图片路径为什么自动拼上了域名端口](https://blog.csdn.net/NOyesNONO_/article/details/125166926)

##### 算法试用接口
当前为前端轮询后端，后端与算法端是异步接口，后端调用算法端后，算法端回调。
在前后端采用长轮询，那么后端与算法端该如何设计？

