# 业务逻辑组织模式


### mvc 和 ddd

**环境:**
敏捷开发快速交付，项目生命周期短，业务理解不透彻分析不出核心业务导致需求多，容易变更。
**mvc:**
1. 重 service 轻 domain，自上而下
2. 面向过程的代码组织模式使得业务分散，这样使得 service 存在两种代码，一种细粒度的最小化操作代码，一种胶水代码。controller 也存在胶水代码。这就造成 service 在业务上不清晰，方法繁多。

符合思维过程，一步步拆分，符合细化（已经将业务拆分）的 wbs 的任务
**DDD**：
1. 重 domain 轻 service，充血模型是业务的精确抽象
2. 将业务复杂混乱的 service 逻辑拆分，且各个业务逻辑**收敛封装**进各自领域对象里，service 只留了编排代码，提高代码可读性
3. 模型充血后，基于模型的业务抽象在不断的迭代之后会越来越明确，业务的细节会越来越精准。
4. 对于非编写此模块人员通过领域对象更容易**分辨出核心业务**逻辑，更容易理解业务。mvc 只能一个 URL 向下捋。
**对比**：
无论是 DDD 还是面向对象，都需要前期对业务有足够的了解，在领域划分，辨析对象属性行为过程中，让模型越来越清晰，边界职责越来越明显。而 mvc 的快速开发，没有这个过程，或者说，mvc 可以配合充实的文档，但还是不如直接代码体现来的直观，DDD 也要有文档体现代码表达不清的业务。

### 代码是如何失控的？
k 12 代码已有或应有的
1. 增删改查类，普通的 MVC 架构，属性放在 pojo，行为放在 service，业务逻辑利用面向过程思维组织脚本式代码分布在 service 和 controller
2. 工具性质的类，如 RecordingTaskPool 或者 concrete 中的工具 map, 有面向对象的影子，既包含自身数据又有行为。
   1. 为什么这种工具性质类往往设计时就是面向对象？感觉牵扯业务简单，容易分析，且为了不扩散影响都是高内聚。
### 事务脚本
1. [写了这么多年后端，你知道事务脚本模式吗？\_Java\_蜜糖的代码注释\_InfoQ写作社区](https://xie.infoq.cn/article/ad1155cae77d1fddfd1d9684f)
2. [面向对象的企业开发（1）事务脚本模式 Traction Script Pattern](https://my.oschina.net/u/3286366/blog/1572480)

### DDD
1. [基于DDD的微服务设计和开发实战](https://mp.weixin.qq.com/s?__biz=MzAxNjk4ODE4OQ==&mid=2247485882&idx=1&sn=c866844c5a002c09470c2f4295cc40bc)
2. [为什么面向对象糟透了？](https://mp.weixin.qq.com/s?__biz=MzAxOTc0NzExNg==&mid=2665517123&idx=1&sn=14b71a4f4444e6b5054793ca8e9a1a17)
3. [基于DDD的微服务设计和开发实战](https://mp.weixin.qq.com/s?__biz=MzAxNjk4ODE4OQ==&mid=2247485882&idx=1&sn=c866844c5a002c09470c2f4295cc40bc)

[实现业务逻辑三种方式：事务脚本、贫血模型、DDD - 董川民](https://www.dongchuanmin.com/operate/2688.html)


## reference
[实现业务逻辑三种方式：事务脚本、贫血模型、DDD - 董川民](https://www.dongchuanmin.com/operate/2688.html)
[微服务架构：从事务脚本到领域模型-阿里云开发者社区](https://developer.aliyun.com/article/718968)
[架构设计原则 - DDD领域驱动设计：贫血模型和充血模型 | C++ 全栈知识体系](https://stibel.icu/md/method/arch-principle/arch-principle-anemia-model.html)